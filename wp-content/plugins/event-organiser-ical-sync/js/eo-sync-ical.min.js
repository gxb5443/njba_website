/*! event-organiser-ical-sync 2.0.1 2015-07-25 22:04 */
!function(a){var b={init:function(){a("#feed-list").wpList({delBefore:b.confirmDelete,dimBefore:b.dimBefore,dimAfter:b.dimAfter,addAfter:b.addAfter,delAfter:b.delAfter}),a("#feed-list").on("click",".row-actions .edit a",function(c){c.preventDefault(),b.revert(),b.showOptions(a(this))}),a("#feed-list").on("click","td.edit-column .cancel",function(a){a.preventDefault(),b.revert()}),a("#feed-list").on("keyup",function(a){return 27==a.which?b.revert():void 0}),a(".eo-advanced-feed-options-toggle").click(function(b){b.preventDefault(),a(this).is(".eo-show-advanced-option")?a("#eo-advanced-feed-options-wrap").show():a("#eo-advanced-feed-options-wrap").hide(),a(".eo-advanced-feed-options-toggle").not(this).show(),a(this).hide()})},showOptions:function(a){var b=a.parents("tbody");b.addClass("inline-edit-row"),b.find("td").hide(),b.find("td.edit-column").show()},revert:function(){return a("#feed-list td").show(),a("#feed-list tbody").removeClass("inline-edit-row"),a("#feed-list td.edit-column").hide(),!1},addAfter:function(b,c){var d,e=wpAjax.parseAjaxResponse(b,c.response,c.element);!e||e.errors?(d=e?e.responses[0].errors[0].message:"Unknown error",a("#"+c.element+" .feed-errors td").append('<div class="feed-error feed-alert"/>').text(d)):a("#eo-feed-no-feeds").hide()},getId:function(b){var c=a(b).closest("tbody").attr("id"),d=c.split("-");return d[d.length-1]},confirmDelete:function(a){return confirm("You are about to permanently delete this feed.\n 'Cancel' to stop, 'OK' to delete.")?a:!1},delAfter:function(b,c){var d,e=wpAjax.parseAjaxResponse(b,c.response,c.element);!e||e.errors?(d=e?e.responses[0].errors[0].message:"Unknown error",a("#"+c.element+" .feed-errors td").html('<div class="feed-error feed-alert"/>').find(".feed-error").text(d)):0===a("#feed-list tbody:visible").length&&a("#eo-feed-no-feeds").show()},dimBefore:function(b){if("fetch-eo-feed"==b.data.action){if(a(b.target).data("eo-lock"))return!1;a(b.target).data("eo-lock","1"),a(b.target).parents(".row-actions").find(".spinner").css("visibility","visible"),a(b.target).css({color:"#aaa",cursor:"default"})}return b},dimAfter:function(b,c){if("fetch-eo-feed"==c.data.action){a(c.target).css({color:"",cursor:"pointer"}),a(c.target).removeData("eo-lock");var d,e=wpAjax.parseAjaxResponse(b,c.response,c.element);if(!e||e.errors)d=e?e.responses[0].errors[0].message:"Unknown error",a("#"+c.element+" .feed-errors td").html('<div class="feed-error feed-alert"/>').find(".feed-error").text(d);else if(jQuery.each(e.responses,function(){var b=a("#"+this.what+"-"+this.id);b.find("td.feed-events").text(this.supplemental.events),b.find("td.last-updated").html(this.supplemental.last_updated)}),e.responses[0].supplemental.warnings){var f=e.responses[0].supplemental.warnings;a("#"+c.element+" .feed-errors td").html('<div class="feed-warning feed-alert">'+f+"</div>")}a(c.target).parents(".row-actions").find(".spinner").css("visibility","hidden")}return c}};a(document).ready(function(){b.init()})}(jQuery);